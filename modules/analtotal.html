DOCTYPE html>
<html lang="pt-pt">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>An√°lise Total</title>
    <link rel="stylesheet" href="../css/styles.pcolor.css">
    <link rel="stylesheet" href="../css/mobile.css">
    <link rel="icon" href="../favicon.ico" sizes="any">
    <link rel="apple-touch-icon" href="../icons/icon-192-v2.png">
    <link rel="manifest" href="../manifest.json">
    <meta name="theme-color" content="#000000">
<style>
/* Collapsible Section Styles */
.collapsible-section {
  margin-bottom: 1.5rem;
  border: 1px solid var(--border);
  border-radius: 12px;
  overflow: hidden;
  background: var(--card);
  box-shadow: var(--shadow-1);
}

.collapsible-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 1rem 1.5rem;
  background: var(--p4);
  cursor: pointer;
  transition: background 0.2s ease;
  user-select: none;
}

.collapsible-header:hover {
  background: var(--p3);
}

.collapsible-header h3 {
  margin: 0;
  padding: 0;
  font-size: 1.2rem;
  font-weight: 700;
  color: var(--text);
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.collapsible-icon {
  font-size: 1.5rem;
  transition: transform 0.3s ease;
  color: var(--p2);
}

.collapsible-section.collapsed .collapsible-icon {
  transform: rotate(-90deg);
}

.collapsible-content {
  padding: 1.5rem;
  display: block;
  animation: slideDown 0.3s ease;
}

.collapsible-section.collapsed .collapsible-content {
  display: none;
}

@keyframes slideDown {
  from {
    opacity: 0;
    transform: translateY(-10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* View Selector Styles */
.view-selector {
  display: flex;
  gap: 0.5rem;
  margin-bottom: 1rem;
  justify-content: center;
  flex-wrap: wrap;
}

.view-btn {
  padding: 0.5rem 1rem;
  border: 1px solid var(--border);
  border-radius: 8px;
  background: #fff;
  color: var(--text);
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
  font-size: 0.9rem;
}

.view-btn:hover {
  background: var(--p4);
  border-color: var(--p3);
}

.view-btn.active {
  background: var(--p2);
  color: #fff;
  border-color: var(--p2);
}

/* Icon styles */
.section-icon {
  font-size: 1.3rem;
}

/* Loading state */
.loading {
  text-align: center;
  padding: 2rem;
  color: var(--text-dim);
  font-style: italic;
}

/* Chart wrapper improvements */
.chart-container {
  position: relative;
  min-height: 300px;
}

/* Compact spacing for merged content */
.viz-card {
  margin-bottom: 1rem;
}

.viz-card:last-child {
  margin-bottom: 0;
}

/* Mobile optimizations */
@media (max-width: 768px) {
  .collapsible-header {
    padding: 0.75rem 1rem;
  }

  .collapsible-header h3 {
    font-size: 1rem;
  }

  .collapsible-content {
    padding: 1rem;
  }

  .view-selector {
    gap: 0.4rem;
  }

  .view-btn {
    padding: 0.4rem 0.8rem;
    font-size: 0.85rem;
  }
}
</style>
</head>
<body id="analtotal-page">
    <!-- Hamburger icon -->
    <button id="menu-icon" aria-label="Open menu">‚ò∞</button>

<header>
    <nav id="nav-menu">
        <ul>
            <!-- Login/User section -->
            <li id="login-section" class="login-block">
                <a href="#" id="login-btn" class="login-visible">üîí Login</a>
                <span id="user-info" class="user-visible" style="display:none;">
                    <a href="#" id="user-name">üë§ Username</a>
                </span>
            </li>

            <li class="separator"></li>

            <!-- Apartamentos Section -->
            <li class="menu-title">Apartamentos</li>
            <li><a href="faturas.html">üìÑ Faturas</a></li>
            <li><a href="analise.html">üìä An√°lise</a></li>
            <li><a href="analise123.html">üè† 123</a></li>
            <li><a href="analise1248.html">üè† 1248</a></li>
            <li><a href="analise123vs1248.html">‚öñÔ∏è 123 vs 1248</a></li>
            <li><a href="analtotal.html" class="active">üìà An√°lise Total</a></li>
            <li><a href="caixa.html">üí∞ Caixa</a></li>
            <li><a href="tmt.html">üß≥ Taxa Tur√≠stica</a></li>
            <li><a href="diversos.html">üìã Diversos</a></li>

            <li class="separator"></li>

            <!-- Investimentos Section -->
            <li class="menu-title">Investimentos</li>
            <li><a href="dca.html">üìà DCA</a></li>
            <li><a href="crypto.html">üöÄ Cripto</a></li>
        </ul>
    </nav>
</header>

<main>
    <h2 class="center">An√°lise Total - Vis√£o Completa</h2>

    <!-- Fatura√ß√£o Section -->
    <section class="collapsible-section" data-section="faturacao">
        <div class="collapsible-header">
            <h3><span class="section-icon">üìä</span> Fatura√ß√£o</h3>
            <span class="collapsible-icon">‚ñº</span>
        </div>
        <div class="collapsible-content">
            <div class="view-selector" data-for="faturacao">
                <button class="view-btn active" data-view="combined">123 + 1248</button>
                <button class="view-btn" data-view="individual">Individual</button>
                <button class="view-btn" data-view="comparison">Comparativo</button>
            </div>

            <!-- Combined View -->
            <div class="view-content" data-view="combined" data-section="faturacao">
                <div class="viz-card">
                    <h4>Fatura√ß√£o Mensal Combinada</h4>
                    <div class="chart-wrap" style="height:320px">
                        <canvas id="chart-faturacao-combined"></canvas>
                    </div>
                    <div class="table-wrap">
                        <div id="tabela-faturacao-combined"></div>
                    </div>
                </div>
            </div>

            <!-- Individual View -->
            <div class="view-content" data-view="individual" data-section="faturacao" style="display:none;">
                <div class="viz-card">
                    <h4>123</h4>
                    <div class="chart-wrap" style="height:280px">
                        <canvas id="chart-faturacao-123"></canvas>
                    </div>
                    <div class="table-wrap">
                        <div id="tabela-faturacao-123"></div>
                    </div>
                </div>
                <div class="viz-card">
                    <h4>1248</h4>
                    <div class="chart-wrap" style="height:280px">
                        <canvas id="chart-faturacao-1248"></canvas>
                    </div>
                    <div class="table-wrap">
                        <div id="tabela-faturacao-1248"></div>
                    </div>
                </div>
            </div>

            <!-- Comparison View -->
            <div class="view-content" data-view="comparison" data-section="faturacao" style="display:none;">
                <div class="viz-card">
                    <h4>Fatura√ß√£o Mensal - Timeline</h4>
                    <div class="chart-wrap" style="height:320px">
                        <canvas id="chart-faturacao-comparison"></canvas>
                    </div>
                    <div class="table-wrap">
                        <div id="tabela-faturacao-comparison"></div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Valor M√©dio/Noite Section -->
    <section class="collapsible-section" data-section="media-noite">
        <div class="collapsible-header">
            <h3><span class="section-icon">üåô</span> Valor M√©dio por Noite</h3>
            <span class="collapsible-icon">‚ñº</span>
        </div>
        <div class="collapsible-content">
            <div class="view-selector" data-for="media-noite">
                <button class="view-btn active" data-view="combined">123 + 1248</button>
                <button class="view-btn" data-view="individual">Individual</button>
                <button class="view-btn" data-view="comparison">Comparativo</button>
            </div>

            <!-- Combined View -->
            <div class="view-content" data-view="combined" data-section="media-noite">
                <div class="viz-card">
                    <div class="chart-wrapper" style="height:260px">
                        <canvas id="chart-media-combined"></canvas>
                    </div>
                </div>
            </div>

            <!-- Individual View -->
            <div class="view-content" data-view="individual" data-section="media-noite" style="display:none;">
                <div class="viz-card">
                    <h4>123</h4>
                    <div class="chart-wrapper" style="height:240px">
                        <canvas id="chart-media-123"></canvas>
                    </div>
                </div>
                <div class="viz-card">
                    <h4>1248</h4>
                    <div class="chart-wrapper" style="height:240px">
                        <canvas id="chart-media-1248"></canvas>
                    </div>
                </div>
            </div>

            <!-- Comparison View -->
            <div class="view-content" data-view="comparison" data-section="media-noite" style="display:none;">
                <div class="viz-card">
                    <div class="chart-wrapper" style="height:260px">
                        <canvas id="chart-media-comparison"></canvas>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Taxa de Ocupa√ß√£o Section -->
    <section class="collapsible-section" data-section="ocupacao">
        <div class="collapsible-header">
            <h3><span class="section-icon">üìÖ</span> Taxa de Ocupa√ß√£o</h3>
            <span class="collapsible-icon">‚ñº</span>
        </div>
        <div class="collapsible-content">
            <div class="view-selector" data-for="ocupacao">
                <button class="view-btn active" data-view="combined">123 + 1248</button>
                <button class="view-btn" data-view="individual">Individual</button>
                <button class="view-btn" data-view="comparison">Comparativo</button>
            </div>

            <!-- Combined View -->
            <div class="view-content" data-view="combined" data-section="ocupacao">
                <div class="viz-card">
                    <div class="chart-wrapper" style="height:260px">
                        <canvas id="chart-ocupacao-combined"></canvas>
                    </div>
                </div>
            </div>

            <!-- Individual View -->
            <div class="view-content" data-view="individual" data-section="ocupacao" style="display:none;">
                <div class="viz-card">
                    <h4>123</h4>
                    <div class="chart-wrapper" style="height:240px">
                        <canvas id="chart-ocupacao-123"></canvas>
                    </div>
                </div>
                <div class="viz-card">
                    <h4>1248</h4>
                    <div class="chart-wrapper" style="height:240px">
                        <canvas id="chart-ocupacao-1248"></canvas>
                    </div>
                </div>
            </div>

            <!-- Comparison View -->
            <div class="view-content" data-view="comparison" data-section="ocupacao" style="display:none;">
                <div class="viz-card">
                    <div class="chart-wrapper" style="height:260px">
                        <canvas id="chart-ocupacao-comparison"></canvas>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Progresso Section -->
    <section class="collapsible-section" data-section="progresso">
        <div class="collapsible-header">
            <h3><span class="section-icon">üìà</span> Progresso</h3>
            <span class="collapsible-icon">‚ñº</span>
        </div>
        <div class="collapsible-content">
            <div class="view-selector" data-for="progresso">
                <button class="view-btn active" data-view="combined">123 + 1248</button>
                <button class="view-btn" data-view="individual">Individual</button>
            </div>

            <!-- Combined View -->
            <div class="view-content" data-view="combined" data-section="progresso">
                <div class="viz-card">
                    <h4 id="progress-title-combined">Progresso</h4>
                    <div class="donut-grid">
                        <div class="donut-card">
                            <canvas id="donut-parcial-combined"></canvas>
                            <div class="donut-meta">
                                <strong id="label-parcial-combined"></strong>
                                <span id="donut-parcial-text-combined"></span>
                            </div>
                        </div>
                        <div class="donut-card">
                            <canvas id="donut-ateset-combined"></canvas>
                            <div class="donut-meta">
                                <strong id="label-ateset-combined"></strong>
                                <span id="donut-ateset-text-combined"></span>
                            </div>
                        </div>
                        <div class="donut-card">
                            <canvas id="donut-vs-combined"></canvas>
                            <div class="donut-meta">
                                <strong id="label-vs-combined"></strong>
                                <span id="donut-vs-text-combined"></span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Individual View -->
            <div class="view-content" data-view="individual" data-section="progresso" style="display:none;">
                <div class="viz-card">
                    <h4 id="progress-title-123">Progresso 123</h4>
                    <div class="donut-grid">
                        <div class="donut-card">
                            <canvas id="donut-parcial-123"></canvas>
                            <div class="donut-meta">
                                <strong id="label-parcial-123"></strong>
                                <span id="donut-parcial-text-123"></span>
                            </div>
                        </div>
                        <div class="donut-card">
                            <canvas id="donut-ateset-123"></canvas>
                            <div class="donut-meta">
                                <strong id="label-ateset-123"></strong>
                                <span id="donut-ateset-text-123"></span>
                            </div>
                        </div>
                        <div class="donut-card">
                            <canvas id="donut-vs-123"></canvas>
                            <div class="donut-meta">
                                <strong id="label-vs-123"></strong>
                                <span id="donut-vs-text-123"></span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="viz-card">
                    <h4 id="progress-title-1248">Progresso 1248</h4>
                    <div class="donut-grid">
                        <div class="donut-card">
                            <canvas id="donut-parcial-1248"></canvas>
                            <div class="donut-meta">
                                <strong id="label-parcial-1248"></strong>
                                <span id="donut-parcial-text-1248"></span>
                            </div>
                        </div>
                        <div class="donut-card">
                            <canvas id="donut-ateset-1248"></canvas>
                            <div class="donut-meta">
                                <strong id="label-ateset-1248"></strong>
                                <span id="donut-ateset-text-1248"></span>
                            </div>
                        </div>
                        <div class="donut-card">
                            <canvas id="donut-vs-1248"></canvas>
                            <div class="donut-meta">
                                <strong id="label-vs-1248"></strong>
                                <span id="donut-vs-text-1248"></span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Heatmap Section -->
    <section class="collapsible-section" data-section="heatmap">
        <div class="collapsible-header">
            <h3><span class="section-icon">üî•</span> Heatmap - Varia√ß√£o YoY</h3>
            <span class="collapsible-icon">‚ñº</span>
        </div>
        <div class="collapsible-content">
            <div class="view-selector" data-for="heatmap">
                <button class="view-btn active" data-view="combined">123 + 1248</button>
                <button class="view-btn" data-view="individual">Individual</button>
            </div>

            <!-- Combined View -->
            <div class="view-content" data-view="combined" data-section="heatmap">
                <div class="viz-card">
                    <div id="heatmap-combined"></div>
                </div>
            </div>

            <!-- Individual View -->
            <div class="view-content" data-view="individual" data-section="heatmap" style="display:none;">
                <div class="viz-card">
                    <h4>123</h4>
                    <div id="heatmap-123"></div>
                </div>
                <div class="viz-card">
                    <h4>1248</h4>
                    <div id="heatmap-1248"></div>
                </div>
            </div>
        </div>
    </section>

    <!-- Taxa de Limpeza Section -->
    <section class="collapsible-section" data-section="limpeza">
        <div class="collapsible-header">
            <h3><span class="section-icon">üßº</span> Taxa de Limpeza</h3>
            <span class="collapsible-icon">‚ñº</span>
        </div>
        <div class="collapsible-content">
            <div class="view-selector" data-for="limpeza">
                <button class="view-btn active" data-view="combined">123 + 1248</button>
                <button class="view-btn" data-view="comparison">Comparativo</button>
            </div>

            <!-- Combined View -->
            <div class="view-content" data-view="combined" data-section="limpeza">
                <div class="viz-card">
                    <div class="table-wrap">
                        <div id="tabela-limpeza-combined"></div>
                    </div>
                </div>
            </div>

            <!-- Comparison View -->
            <div class="view-content" data-view="comparison" data-section="limpeza" style="display:none;">
                <div class="viz-card">
                    <div class="table-wrap">
                        <div id="tabela-limpeza-comparison"></div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Noites Section -->
    <section class="collapsible-section" data-section="noites">
        <div class="collapsible-header">
            <h3><span class="section-icon">üåÉ</span> Noites por Reserva</h3>
            <span class="collapsible-icon">‚ñº</span>
        </div>
        <div class="collapsible-content">
            <div class="view-selector" data-for="noites">
                <button class="view-btn active" data-view="combined">123 + 1248</button>
                <button class="view-btn" data-view="individual">Individual</button>
            </div>

            <!-- Combined View -->
            <div class="view-content" data-view="combined" data-section="noites">
                <div class="viz-card">
                    <div class="table-wrap">
                        <div id="tabela-noites-combined"></div>
                    </div>
                </div>
            </div>

            <!-- Individual View -->
            <div class="view-content" data-view="individual" data-section="noites" style="display:none;">
                <div class="viz-card">
                    <h4>123</h4>
                    <div class="table-wrap">
                        <div id="tabela-noites-123"></div>
                    </div>
                </div>
                <div class="viz-card">
                    <h4>1248</h4>
                    <div class="table-wrap">
                        <div id="tabela-noites-1248"></div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- H√≥spedes Section -->
    <section class="collapsible-section" data-section="hospedes">
        <div class="collapsible-header">
            <h3><span class="section-icon">üë•</span> N√∫mero de H√≥spedes</h3>
            <span class="collapsible-icon">‚ñº</span>
        </div>
        <div class="collapsible-content">
            <div class="view-selector" data-for="hospedes">
                <button class="view-btn active" data-view="combined">123 + 1248</button>
                <button class="view-btn" data-view="individual">Individual</button>
            </div>

            <!-- Combined View -->
            <div class="view-content" data-view="combined" data-section="hospedes">
                <div class="viz-card">
                    <div class="table-wrap">
                        <div id="tabela-hospedes-combined"></div>
                    </div>
                </div>
            </div>

            <!-- Individual View -->
            <div class="view-content" data-view="individual" data-section="hospedes" style="display:none;">
                <div class="viz-card">
                    <h4>123</h4>
                    <div class="table-wrap">
                        <div id="tabela-hospedes-123"></div>
                    </div>
                </div>
                <div class="viz-card">
                    <h4>1248</h4>
                    <div class="table-wrap">
                        <div id="tabela-hospedes-1248"></div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Check-ins Dias da Semana Section -->
    <section class="collapsible-section" data-section="dias-semana">
        <div class="collapsible-header">
            <h3><span class="section-icon">üìÜ</span> Check-ins por Dia da Semana</h3>
            <span class="collapsible-icon">‚ñº</span>
        </div>
        <div class="collapsible-content">
            <div class="view-selector" data-for="dias-semana">
                <button class="view-btn active" data-view="combined">123 + 1248</button>
                <button class="view-btn" data-view="comparison">Comparativo</button>
            </div>

            <!-- Combined View -->
            <div class="view-content" data-view="combined" data-section="dias-semana">
                <div class="viz-card">
                    <div class="chart-wrapper" style="height:280px">
                        <canvas id="chart-checkins-combined"></canvas>
                    </div>
                </div>
            </div>

            <!-- Comparison View -->
            <div class="view-content" data-view="comparison" data-section="dias-semana" style="display:none;">
                <div class="viz-card">
                    <div id="checkins-dow-nav" style="display:flex;gap:.5rem;justify-content:flex-end;align-items:center;margin:.25rem 0 .5rem;">
                        <button id="btn-checkins-prev" type="button" aria-label="Ano anterior">‚óÄÔ∏é</button>
                        <span id="lbl-checkins-ano" style="font-weight:600"></span>
                        <button id="btn-checkins-next" type="button" aria-label="Ano seguinte">‚ñ∂Ô∏é</button>
                    </div>
                    <div class="chart-wrapper" style="height:260px">
                        <canvas id="chart-checkins-comparison"></canvas>
                    </div>
                </div>
            </div>
        </div>
    </section>

</main>

<!-- Load Chart.js and modules -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2"></script>
<script type="module" src="../js/script.js"></script>
<script type="module" src="../js/analtotal-main.js"></script>

</body>
</html>