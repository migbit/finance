/* =============================
   Finance – Faturas/Relatórios
   (cleaned, self-contained CSS)
   ============================= */

/* ---- Reset ---- */
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0;}

/* ---- Variables (kept from app palette) ---- */
:root{
  --color-primary:#34495e;
  --color-secondary:#2c3e50;
  --color-accent:#1abc9c;
  --color-accent-dark:#16a085;
  --color-background:#ecf0f1;
  --color-white:#ffffff;
  --color-gray:#bdc3c7;
  --color-gray-dark:#95a5a6;
  --color-hover-bg:#202f3e;
  --border-radius-sm:4px;
  --border-radius-md:8px;
  --spacing-xs:.25rem;
  --spacing-sm:.5rem;
  --spacing-md:1rem;
  --spacing-lg:1.5rem;
  --shadow-light:0 2px 5px rgba(0,0,0,.1);
  --shadow-medium:0 4px 8px rgba(0,0,0,.1);
  --font-family:'Roboto',system-ui,Arial,sans-serif;
  --font-size-small:.9rem;
}

/* ---- Base ---- */
body{
  font-family: 'Nunito Sans', sans-serif;
  background:var(--color-background);
  color:var(--color-secondary);
  display:flex;flex-direction:column;min-height:100vh;line-height:1.55;
}
main{flex:1;padding:var(--spacing-md);max-width:1200px;margin:0 auto;}

/* ---- Header + Nav (minimal) ---- */
header{background:var(--color-primary);color:var(--color-white);padding:var(--spacing-sm);box-shadow:var(--shadow-light);text-align: center;}
header h1{color:var(--color-white);font-size:1.25rem; margin: 0; text-align: center;}
nav{background:var(--color-primary);}
#menu-icon,.menu-icon{display:none;font-size:1.6rem;color:#fff;cursor:pointer;text-align:center;padding:var(--spacing-sm);}
#nav-menu ul{list-style:none;display:flex;justify-content:center;flex-wrap:wrap;margin-top:var(--spacing-sm);}
#nav-menu li{margin:0 var(--spacing-sm);}
#nav-menu a{display:block;color:#fff;text-decoration:none;font-weight:500;padding:var(--spacing-xs) var(--spacing-sm);border-radius:var(--border-radius-sm);transition:background .2s;}
#nav-menu a:hover{background:var(--color-hover-bg);}
#nav-menu a.active{font-weight:700;border-bottom:2px solid #fff;}
#nav-menu ul li.separator{color:#aaa;margin:0 var(--spacing-xs);}

@media (max-width:768px){
  #menu-icon,.menu-icon{display:block;}
  nav ul{display:none;flex-direction:column;align-items:center;padding:var(--spacing-md);}
  nav.active ul{display:flex;}
  nav ul li{margin:var(--spacing-sm) 0;}
}

/* ---- Cards / Sections (used on faturas) ---- */
.form-section,
.report-section {
  background: transparent;            /* remove fundo branco */
  padding: 0;                         /* elimina espaço interno */
  margin-bottom: var(--spacing-md);
  border-radius: var(--border-radius-md);
  box-shadow: none;                   /* sem sombra no container principal */
}

.form-group {
  margin-bottom: var(--spacing-sm);
}

label {
  display: block;
  margin-bottom: var(--spacing-xs);
  font-weight: 700;
  font-size: var(--font-size-small);
  color: var(--color-primary);
}

/* ---- Inputs & Buttons ---- */
input[type="text"],input[type="number"],select,textarea{
  width:100%;max-width:300px;padding:.45rem .55rem;border:1px solid var(--color-gray);
  border-radius:var(--border-radius-sm);font-size:var(--font-size-small);background:#fff;color:#000;
}
button,input[type="submit"],input[type="button"]{
  padding:.45rem .75rem;background:var(--color-accent);border:none;color:#fff;cursor:pointer;
  border-radius:var(--border-radius-sm);font-size:var(--font-size-small);transition:background .2s;
}
button:hover,input[type="submit"]:hover,input[type="button"]:hover{background:var(--color-accent-dark);}

/* ---- Tables (for reports) ---- */
table{width:100%;border-collapse:collapse;margin:var(--spacing-md) 0;background:#fff;box-shadow:var(--shadow-light);}
th,td{padding:var(--spacing-sm);text-align:center;border-bottom:1px solid #ddd;}
th{background:var(--color-primary);color:#fff;font-weight:700;text-transform:uppercase;font-size:.85rem;}
tr:nth-child(even){background:#f8f9fa;}
tr:hover{background:#f1f1f1;}

/* ===========================
   Specific: Faturas / Relatórios
   =========================== */

   .hidden { display: none; }

#fatura-form-wrap {
  margin-top: 1rem;
  background: #fff;
  padding: 1rem;
  border: 1px solid var(--color-gray);
  border-radius: var(--border-radius-md);
  box-shadow: var(--shadow-light);
}

.chart-wrap{width:100%;max-width:700px;margin:1.25rem auto;}
.report-filters{margin-bottom:1rem;display:flex;align-items:center;gap:.5rem;}
.comparacao-item{margin-bottom:1rem;}

/* Progress bars used in Progresso Anual */
.progress{background:#e9ecef;border-radius:.25rem;overflow:hidden;height:1.25rem;margin-top:.25rem;}
.progress-bar{height:100%;background:#3498db;display:flex;align-items:center;justify-content:center;color:#fff;font-size:.85rem;}

/* Media de Faturação table */
.media-faturacao{width:100%;border-collapse:collapse;margin-top:1rem;}
.media-faturacao th,.media-faturacao td{padding:.2rem .4rem;border:1px solid #ddd;text-align:right;}
.media-faturacao th:first-child,.media-faturacao td:first-child{text-align:left;}
.media-faturacao, .media-faturacao th, .media-faturacao td{ text-align:center; }

/* Fine-tune widths of key inputs on the fatura form */
#fatura-form input[type="number"],
#fatura-form input[type="text"],
#fatura-form select{width:auto;max-width:none;} /* avoid global 300px cap */

#fatura-form #taxa-airbnb{width:120px;padding:.5rem;}
#fatura-form #valor-transferencia{width:200px;padding:.5rem;}
#fatura-form #valor-operador{width:120px;padding:.5rem;}
#fatura-form #noites-extra{width:80px;padding:.5rem;}
#fatura-form #noites-criancas{width:80px;padding:.5rem;}
#fatura-form #valor-direto{width:120px;padding:.5rem;}
#fatura-form #valor-tmt{width:120px;padding:.5rem;}

/* Colors matching apt tags in charts/labels */
.apt-123{color:rgba(54,162,235,1);}
.apt-1248{color:rgba(245,133,20,1);}
.apt-1231248{color:rgb(20, 78, 3);}

/* Divider between sections */
.divider{border:none;border-top:2px solid #ddd;margin:1.25rem 0;}

/* DCA block (small subset – only if used inside faturas page) */
#dca-section{width:100%;padding-inline:var(--spacing-md);}
:root{--dca-input-w:150px;--dca-gap:24px;--dca-canvas-h:360px;}
.wide-input,.ticker-input,#dca-month-sel{width:var(--dca-input-w) !important;}
#dca-form input,#dca-form select{height:38px;font-size:15px;padding:4px 8px;margin-top:4px;}
.charts-grid{display:flex;flex-direction:column;gap:var(--dca-gap);}
.chart-card{padding:6px 8px 20px;border-radius:10px;background:transparent;border-bottom:1px solid #ddd;}
.chart-card:last-child{border-bottom:none;}
.chart-card h3{margin:0 0 6px 4px;font-weight:600;}
#dca-section .chart-card canvas{width:100% !important;height:var(--dca-canvas-h) !important;}


/* Altura padrão no desktop 1920×1080 */
:root {
  --chart-h: 260px;
}

/* Portáteis/monitores médios: um pouco mais alto */
@media (max-width: 1280px) {
  :root { --chart-h: 220px; }
}

/* Tablets e telemóveis: ainda mais alto para leitura */
@media (max-width: 768px) {
  :root { --chart-h: 260px; }
}

#analise-faturacao-container canvas {
  height: var(--chart-h) !important;
  width: 100% !important;
  display: block;
}

/* Heatmap Receita vs. Ano Anterior */
.heatmap-wrap {
  overflow-x: auto;
}

.heatmap-legend {
  display: flex;
  align-items: center;
  gap: 8px;
  margin: 8px 0 16px;
  font-size: 0.9rem;
  color: #333;
}

.heatmap-gradient {
  height: 10px;
  width: 180px;
  background: linear-gradient(to right, #d9534f, #ececec 50%, #28a745);
  border-radius: 6px;
  border: 1px solid #ddd;
}

.heatmap-table {
  border-collapse: collapse;
  width: 100%;
  min-width: 640px;
}

.heatmap-table th,
.heatmap-table td {
  border: 1px solid #e6e6e6;
  padding: 8px 10px;
  text-align: center;    /* centraliza todo o texto */
  font-size: 0.95rem;
  color: #111;
  background: #fff;
}

.heatmap-table thead th {
  font-weight: 700;
  position: sticky;
  top: 0;
  z-index: 2;
}

.heatmap-table tbody th {
  font-weight: 700;
  position: sticky;
  left: 0;
  z-index: 1;
}

.heatmap-cell {
  font-weight: 600;
}

.heatmap-muted {
  color: #666;
}


.detalhes-extra h4 {
  margin: 8px 0;
  font-size: 1rem;
}

.tabela-detalhes {
  border-collapse: collapse;
  width: 100%;
  max-width: 640px;
}

.tabela-detalhes th,
.tabela-detalhes td {
  border: 1px solid #e6e6e6;
  padding: 6px 10px;
  text-align: left;
}

.detalhes-extra {
  margin-top: 0.75rem;
  padding: 0.5rem 0.75rem;
  background: #fafafa;
  border: 1px solid #e6e6e6;
  border-radius: var(--border-radius-sm);
}

.detalhes-extra ul {
  list-style: none;
  padding: 0;
  margin: 0.25rem 0 0 0;
}

.detalhes-extra li {
  margin: 0.25rem 0;
  font-size: 0.9rem;
  display: flex;
  justify-content: space-between;
}

.detalhes-extra li strong {
  color: var(--color-primary);
  margin-right: 8px;
}

.detalhes-row td {
  background: #fafafa;
  border-top: 0;
}
.detalhes-extra { margin: .5rem 0; }

.detalhes-grupo td {
  background: #fafafa;
  padding: 12px;
  border-top: 0;
}

.form-header {
  display:flex; align-items:center; justify-content:space-between;
  margin-bottom:12px;
}

.form-row { 
  display: grid; 
  gap: 16px; 
  margin-bottom: 12px; 
  align-items: end;       /* já tinhas no fim do ficheiro */
  justify-items: start;   /* novo: impede o stretch e encosta à esquerda */
}

.form-row.row-5 { grid-template-columns: repeat(5, minmax(140px, auto)); }
.form-row.row-4 { grid-template-columns: repeat(4, minmax(160px, auto)); }
.form-row.row-3 { grid-template-columns: repeat(3, minmax(180px, auto)); }

@media (max-width: 1100px) {
  .form-row.row-5 { grid-template-columns: repeat(3, auto); }
}
@media (max-width: 800px) {
  .form-row.row-4, .form-row.row-5 { grid-template-columns: repeat(2, auto); }
  .form-row.row-3 { grid-template-columns: repeat(2, auto); }
}
@media (max-width: 520px) {
  .form-row { grid-template-columns: 1fr; }
}
.form-actions { margin-top: 8px; }

/* --- Normalização de inputs para todos os browsers --- */
/* Remover spinners no Chrome/Safari/Edge */
input[type="number"]::-webkit-outer-spin-button,
input[type="number"]::-webkit-inner-spin-button {
  -webkit-appearance: none;
  margin: 0;
}
/* Remover spinners no Firefox */
input[type="number"] {
  -moz-appearance: textfield;
}

/* Altura consistente em inputs, selects e dates */
:root { --control-h: 40px; }

#fatura-form input[type="text"],
#fatura-form input[type="number"],
#fatura-form input[type="date"],
#fatura-form select {
  height: var(--control-h);
  line-height: var(--control-h);
  padding: 0 .6rem;        /* iguala “visual” com select */
}

/* Select sem discrepâncias visuais de altura */
#fatura-form select {
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
  background-origin: content-box;
}

/* Opcional: largura mínima para números curtos
   evita que o browser coloque um “botão” separado */
#noites-extra, #noites-criancas, #valor-tmt {
  min-width: 110px;
}

/* Esconder blocos marcados como no-pdf quando exportas/imprimes */
@media print {
  .no-pdf { display: none !important; }
}



/* Página Caixa */
/*   ----------------------------------------------------------->  Caixa Page Styles */
#relatorio-caixa h3 {
    margin: 1.5rem 0 1rem 0;
    font-size: 1.25rem;
    color: #333;
    border-bottom: 2px solid #333;
    padding-bottom: 0.5rem;
}

#relatorio-caixa > div {
    border-bottom: 1px solid #ccc;
    padding-bottom: 1.5rem;
    margin-bottom: 1.5rem;
}

.btn-entrada,
.btn-saida {
    padding: 0.5rem 1rem;
    margin: 0.25rem;
    border: none;
    cursor: pointer;
    font-weight: bold;
    border-radius: var(--border-radius-sm);
    transition: var(--transition-default);
}

.btn-entrada {
    background-color: #ecf0f1;
    color: #333;
}

.btn-saida {
    background-color: #ecf0f1;
    color: #333;
}

.btn-entrada.btn-active {
    background-color: #2ecc71;
    color: var(--color-white);
}

.btn-saida.btn-active {
    background-color: #e74c3c;
    color: var(--color-white);
}

.valor-positivo {
    color: #2ecc71;
}

.valor-negativo {
    color: #e74c3c;
}

.total-caixa {
    font-weight: bold;
    font-size: 1.1rem;
    margin-top: 1rem;
    padding: var(--spacing-sm);
    background-color: #fafafa;
    border-radius: var(--border-radius-sm);
    text-align: center;
}

/* Boxes layout for Caixa section */
.report-container {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
    gap: 16px;
}

.report-box {
    background: #fff;
    padding: 16px;
    border-radius: var(--border-radius-sm);
    box-shadow: 0 2px 6px rgba(0,0,0,0.08);
}

/* Optional: tidy h2 spacing inside each box */
.report-box > h2 {
    margin-top: 0;
    margin-bottom: 0.75rem;
}

#caixa {
    padding: 0.4rem;
    border-radius: var(--border-radius-sm);
    border: 1px solid #ccc;
    font-size: 1rem;
}

#marcar-p {
    margin-right: 0.5rem;
}

/* Center the Entrada / Saída buttons */
.form-group.buttons {
    display: flex;
    justify-content: center;
    gap: 10px;
}

/* Make the Valor input full width */
#valor {
    width: 100%;
    padding: 0.5rem;
    border-radius: var(--border-radius-sm);
    border: 1px solid #ccc;
    font-size: 1rem;
}

/* Align checkbox with label text */
.form-group.checkbox {
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

/* Center Entrada / Saída buttons */
.form-group.buttons {
    display: flex;
    justify-content: center;
    gap: 10px;
}

/* Make buttons consistent width */
.btn-entrada,
.btn-saida {
    min-width: 110px;
}

/* Ensure active colors: Entrada = green, Saída = red */
.btn-entrada.btn-active {
    background-color: #2ecc71;
    color: #fff;
}
.btn-saida.btn-active {
    background-color: #e74c3c;
    color: #fff;
}

/* Wider/taller Valor input */
#valor {
    width: 100%;
    padding: 0.6rem 0.75rem;
    border-radius: var(--border-radius-sm);
    border: 1px solid #ccc;
    font-size: 1rem;
    box-sizing: border-box;
}




/* DIVERSOS */
/* Estilo do formulário Carlos – Faturas Pendentes */
#carlos-invoice-form {
  display: flex;
  flex-wrap: wrap;      /* permite quebrar em mobile */
  gap: 10px;            /* espaço entre os elementos */
  align-items: center;  /* alinha verticalmente com o botão */
  margin-bottom: 15px;
}

#carlos-invoice-form input {
  flex: 1 1 150px;      /* inputs crescem mas têm min 150px */
  padding: 6px 8px;
}

#carlos-invoice-form button {
  flex: 0 0 auto;       /* botão mantém tamanho natural */
  padding: 6px 12px;
}








/* ---- Responsive tweaks for small screens ---- */
@media (max-width:768px){
  #fatura-form #taxa-airbnb,
  #fatura-form #valor-transferencia,
  #fatura-form #valor-operador,
  #fatura-form #noites-extra,
  #fatura-form #noites-criancas,
  #fatura-form #valor-direto,
  #fatura-form #valor-tmt{width:100%;}
}



/* Corrige alinhamentos */

/* 1) Grid da página: colunas não se esticam e tudo encostado à esquerda */
.form-row{
  display:grid;
  gap:16px;
  margin-bottom:12px;
  align-items:end;         /* alinha os campos pelo fundo */
  justify-items:start;     /* alinha cada célula à esquerda */
  justify-content:start;   /* encosta o conjunto de colunas à esquerda */
}

/* Colunas com largura natural (mínimo razoável) */
.form-row.row-5{ grid-template-columns:repeat(5, minmax(140px, auto)); }
.form-row.row-4{ grid-template-columns:repeat(4, minmax(160px, auto)); }
.form-row.row-3{ grid-template-columns:repeat(3, minmax(180px, auto)); }

/* Responsivo sem “fr” para não esticar */
@media (max-width:1100px){
  .form-row.row-5{ grid-template-columns:repeat(3, auto); }
}
@media (max-width:800px){
  .form-row.row-4, .form-row.row-5{ grid-template-columns:repeat(2, auto); }
  .form-row.row-3{ grid-template-columns:repeat(2, auto); }
}
@media (max-width:520px){
  .form-row{ grid-template-columns:1fr; } /* mobile: 1 coluna */
}

/* 2) Inputs do formulário NÃO ocupam a largura total da coluna */
#fatura-form input,
#fatura-form select,
#fatura-form textarea{
  width:auto;            /* impede width:100% herdado de estilos globais */
  max-width:none;
  box-sizing:border-box;
}

/* Altura consistente */
:root{ --control-h:40px; }
#fatura-form input[type="text"],
#fatura-form input[type="number"],
#fatura-form input[type="date"],
#fatura-form select{
  height:var(--control-h);
  line-height:var(--control-h);
  padding:0 .6rem;
  font-size:0.95rem;
}

/* Remover spinners dos números (evita “quadradinhos” desalinhados) */
#fatura-form input[type="number"]::-webkit-outer-spin-button,
#fatura-form input[type="number"]::-webkit-inner-spin-button{ -webkit-appearance:none; margin:0; }
#fatura-form input[type="number"]{ -moz-appearance:textfield; }

/* 3) Larguras sugeridas para evitar variações visuais */
#taxa-airbnb,
#valor-operador,
#valor-direto,
#valor-tmt,
#noites-extra,
#noites-criancas{ width:120px; }

#valor-transferencia{ width:220px; }
#checkin, #checkout{ width:220px; }
#numero-noites, #preco-medio-noite{ width:220px; }

/* Opcional: se tiveres grupos de label+campo */
.form-group{ display:flex; flex-direction:column; }


/* =========================================================
   DCA PAGE (escopado) + Fixes de contraste e variável ausente
   ========================================================= */

/* DCA – layout dos botões, sem mexer nas cores globais */
.dca-page .btns button{
  padding: 9px 12px;
  border-radius: 10px;
  border: 1px solid var(--color-gray);
}

/* Opcional: botão neutro (branquinho) quando a secção estiver aberta */
.dca-page .btn-soft{
  background:#fff;
  color: var(--color-secondary);
  border: 1px solid var(--color-gray);
}


/* Variáveis (fallbacks) usadas nesta página */
.dca-page{
  --gap: 12px;
  --radius: 12px;
  --muted: #7a7a7a;
  --ok: #1f8f3a;
  --bad: #c53030;
  --bg-soft: rgba(0,0,0,0.03);
  --card: #fff;
  --grid-border: rgba(0,0,0,0.08);
}

/* Em algumas instalações o body global é branco; garantimos contraste suave */
.dca-page{ background: var(--color-bg, #f6f7fb); }

/* Content wrapper (mantém consistência com outras páginas) */
.dca-page .wrap{
  max-width: 1200px;
  margin: 0 auto;
  padding: var(--spacing-md, 24px);
}

/* Controles do topo */
.dca-page .controls{
  display: grid;
  gap: var(--gap);
  grid-template-columns: repeat(12, 1fr);
  background: var(--card);
  padding: 16px;
  border-radius: var(--radius);
  box-shadow: var(--shadow-light, 0 2px 10px rgba(0,0,0,.06));
  margin: 16px 0 12px;
}
.dca-page .controls .field{ display:flex; flex-direction:column; gap:6px; }
.dca-page .controls label{ font-size:.85rem; color: var(--muted); }
.dca-page .controls input[type="number"],
.dca-page .controls input[type="date"]{
  padding:8px 10px;
  border:1px solid var(--grid-border);
  border-radius:8px;
  outline:none;
}
.dca-page .controls .row{ grid-column: span 12; display:flex; gap:8px; flex-wrap:wrap; }
.dca-page .controls .field.sm{ width:180px; }
.dca-page .controls .btns{ margin-left:auto; display:flex; gap:8px; align-items:flex-end; }
.dca-page button.btn{
  padding:9px 12px;
  border-radius:10px;
  border:1px solid var(--grid-border);
  background:#fff;
  cursor:pointer;
  transition: var(--transition-default, .2s ease);
}
.dca-page button.btn:hover{ filter: brightness(0.98); }
.dca-page button.primary{
  background: var(--color-primary, #2b5fd9);
  border-color: transparent;
  color:#fff;
}
.dca-page button:disabled{ opacity:.6; cursor:not-allowed; }
.dca-page .legend{ font-size:.85rem; color: var(--muted); margin:8px 0 14px; }

/* Agrupamento por ano */
.dca-page .year-group{
  background: var(--card);
  border-radius: var(--radius);
  box-shadow: var(--shadow-light, 0 2px 10px rgba(0,0,0,.06));
  margin-bottom:10px;
  overflow:hidden;
}
.dca-page .year-head{
  display:flex; align-items:center; justify-content:space-between;
  padding:10px 14px; background: var(--bg-soft);
  border-bottom:1px solid var(--grid-border);
}
.dca-page .year-head h3{ margin:0; font-size:1rem; }
.dca-page .year-head .meta{ font-size:.85rem; color: var(--muted); }
.dca-page .year-toggle{ cursor:pointer; }
.dca-page .pill{
  display:inline-block; padding:2px 8px; border-radius:999px;
  background:#eef2ff; color:#3949ab; font-size:.78rem;
}

/* Tabela */
.dca-page table.grid{
  width:100%; border-collapse:collapse; font-size:.92rem;
}
.dca-page table.grid th,
.dca-page table.grid td{
  border-bottom:1px solid var(--grid-border);
  padding:10px 8px; vertical-align:middle; background:#fff;
}

/* FIX 1: sobrepor regra global que pintava todos os <th> de branco */
.dca-page table.grid th{
  position: sticky; top: 0;
  background: #fafafa !important;
  color: var(--color-secondary, #222) !important;
  z-index: 1; font-weight:600; text-align:left;
}

.dca-page table.grid td.num{
  text-align:right; font-variant-numeric: tabular-nums;
}
.dca-page table.grid td.editable{ background:#fffcf2; }
.dca-page .pos{ color: var(--ok); font-weight:600; }
.dca-page .neg{ color: var(--bad); font-weight:600; }
.dca-page .muted{ color: var(--muted); }

/* Rodapé de cada ano */
.dca-page .foot{
  display:flex; gap:8px; align-items:center; justify-content:flex-end;
  padding:10px 14px; background:#fafafa; border-top:1px solid var(--grid-border);
}

/* Responsivo */
@media (max-width: 920px){
  .dca-page .controls{ grid-template-columns: repeat(6,1fr); }
  .dca-page .controls .field.sm{ width:100%; }
}
@media (max-width: 620px){
  .dca-page table.grid{ font-size:.85rem; }
}

/* FIX 2: variável usada em botões de outras páginas e não definida globalmente */
:root{
  --transition-default: .2s ease;
}

/* Opcional: manter cabeçalhos brancos só em tabelas "não grid" */
table:not(.grid) th{
  background: var(--color-primary);
  color: #fff;
}

#params-table th {
  white-space: pre-line;
  vertical-align: middle;
  text-align: center;
}

#params-table th.cenarios {
  position: relative;
  border-bottom: none;       /* retira o traço que aparece de fora a fora */
}

#params-table th.cenarios::after {
  content: "";
  position: absolute;
  left: 1em;               /* ajuste: começa ~1 espaço antes do “P” */
  right: 1em;              /* ajuste: termina simétrico ao lado direito */
  bottom: 0;
  border-bottom: 2px solid #fff; /* mesma cor do traço de cabeçalho */
  }

  /* Parâmetros */
/* Inputs dos parâmetros - larguras ajustadas */
#params-table input[type=month] {
  width: 14ch;   /* espaço suficiente para AAAA-MM */
  text-align: center;
  height: 36px;
  line-height: 36px;
}

#params-table input[type=number] {
  width: 8ch;    /* mais compacto e proporcional ao conteúdo */
  text-align: center;
  height: 36px;
  line-height: 36px;
}

/* Centrar inputs dentro das células (evita "fugirem" para a direita) */
#params-table td.num {
  text-align: center; /* centra o conteúdo da célula */
}
#params-table td.num input {
  display: block;
  margin: 0 auto;
}

/* (Opcional) se quiseres também centrar no registo mensal */
.table-dca input.cell {
  text-align: center;   /* antes estava right */
  height: 32px;
  line-height: 32px;
}

/* Evitar que a tabela "salte" para fora do container */
.report-section { overflow-x: auto; }

/* Garante que a tabela ocupa a largura e calcula melhor as colunas */
.table-dca {
  width: 100%;
  border-collapse: collapse;
  table-layout: auto; /* se precisares de colunas mais equilibradas, usa fixed */
}

/* Se o cabeçalho for muito largo, permite quebra */
.table-dca th { white-space: pre-line; }

/* Registo Mensal – linhas de grupo no cabeçalho */
.table-dca th.cenarios {
  position: relative;
  border-bottom: none;   /* remove a linha horizontal completa */
}

.table-dca th.cenarios::after {
  content: "";
  position: absolute;
  left: 0.8em;          /* controla onde começa a linha */
  right: 0.8em;         /* controla onde termina */
  bottom: 0;
  border-bottom: 2px solid #fff; /* usa a mesma cor do cabeçalho */
  opacity: .6;          /* ligeiro para não pesar tanto */
}

/* --- Registo Mensal: layout limpo por faixas --- */

/* Cabeçalho fixo e legível (mantém a tua cor atual) */
.table-dca thead th {
  position: sticky;
  top: 0;
  z-index: 2;
  white-space: pre-line;
  text-align: center;
  vertical-align: middle;
}

/* Cores MUITO leves por grupo (apenas no corpo da tabela) */
:root{
  --g1:#f7f9fc;  /* Mês/Inv./Res. Total */
  --g2:#eef6ff;  /* SWDA */
  --g3:#fff4e6;  /* AGGH */
  --g4:#f6f5ff;  /* Cenários (€) */
  --g5:#f5fbf5;  /* Juro */
}

/* 1) Mês | Inv. */
.table-dca tbody td:nth-child(1),
.table-dca tbody td:nth-child(2){ background: var(--g1); }

/* 2) SWDA: 3–5 */
.table-dca tbody td:nth-child(3),
.table-dca tbody td:nth-child(4),
.table-dca tbody td:nth-child(5){ background: var(--g2); }

/* 3) AGGH: 6–8 */
.table-dca tbody td:nth-child(6),
.table-dca tbody td:nth-child(7),
.table-dca tbody td:nth-child(8){ background: var(--g3); }

/* 4) Res. Total (coluna 9) – cor distinta das restantes */
.table-dca tbody td:nth-child(9){ background: #fcdbdb; } /* ou #fff se preferires branco */

/* 5) Cenários (€): 10–13 (Atual + Pes + Real + Ot) */
.table-dca tbody td:nth-child(10),
.table-dca tbody td:nth-child(11),
.table-dca tbody td:nth-child(12),
.table-dca tbody td:nth-child(13){ background: var(--g4); }

/* 6) Juro (coluna 14) */
.table-dca tbody td:nth-child(14){ background: var(--g5); }



/* Centrar JURO (header + célula + input) */
.table-dca thead th:nth-child(14),
.table-dca tbody td:nth-child(14){ text-align: center !important; }

.table-dca tbody td:nth-child(14) input {
  display: block;          /* permite usar margin auto */
  margin: 0 auto;          /* centra o próprio input */
  text-align: center !important;  /* centra o texto dentro do input */
  width: 8ch;              /* igual ao resto das células numéricas */
  height: 32px; line-height: 32px;
}


/* Inputs alinhados e consistentes (mantém leve) */
.table-dca input.cell{
  width: 8ch;
  text-align: center;
  display: block;
  margin: 0 auto;
}

/* Realça ganhos/perdas (já tinhas) */
.table-dca .pos { color:#0a7f2e; font-weight:600; }
.table-dca .neg { color:#b00020; font-weight:600; }

/* Scroll horizontal se necessário (sem “sair” do container) */
.report-section { overflow-x: auto; }

.page-title { margin: 0 0 1rem; font-size: 1.6rem; }

.table-dca tbody td:nth-child(2),
.table-dca tbody td:nth-child(14) {
  text-align: left;
}
/* INV. (coluna 2) e JURO (coluna 14) centrados — header + body */
.table-dca thead th:nth-child(2),
.table-dca tbody td:nth-child(2),
.table-dca thead th:nth-child(14),
.table-dca tbody td:nth-child(14){
  text-align: center !important;
}

/* JURO: garantir que o input fica mesmo centrado */
.table-dca tbody td:nth-child(14) input.cell,
.table-dca .cash {
  display: inline-block !important;
  width: 8ch;
  text-align: center !important;

}

/* Parâmetros – manter uma única cor no header */
#params-table th.cenarios::after { 
  content: none !important; 
}

/* (opcional) neutralizar qualquer fundo diferente no params */
#params-table th.swda-block,
#params-table th.aggh-block,
#params-table td { 
  background: transparent !important; 
}

.center { text-align: center; }
.muted-sub { color: #666; font-weight: 600; margin-top: .25rem; }

.report-section h2.center { margin-bottom: .25rem; }
.report-section h3.center { margin: 2rem 0 0; }
.report-section h3.center:first-of-type {
  margin-top: 2rem; /* igual aos outros */
}

#chart-comparacao-apt {
  margin-top: 40px;  /* ajusta o valor (px) até ficares satisfeito */
}

h2, h3 {
  font-weight: 700; /* títulos bem destacados */
}

.muted-sub {
  font-weight: 600;
}

.chart-and-table {
  max-width: 900px;   /* ajusta o valor para o que fica mais equilibrado */
  margin: 0 auto;     /* centraliza na página */
}

.chart-and-table .chart-wrap,
.chart-and-table .media-faturacao {
  width: 100%;
}

.comparacao-item {
  margin-bottom: 1.2rem; /* ajusta o valor como quiseres */
}

/* lista das barras */
.progress-list { display: grid; row-gap: 14px; } /* espaço entre barras */
#progresso-anos + .divider { margin-top: 12px; } /* única linha de separação a seguir */

.media-faturacao tbody tr:hover td {
  filter: brightness(0.92);   /* escurece ~8% */
  transition: filter 0.1s ease-in-out;
}

main.report-wide { max-width: 1400px; }

.chart-wrap-480, .chart-wrap, .chart-wrapper { overflow-x: auto; overflow-y: hidden; }

.chart-wrap, .chart-wrap-480, .chart-wrapper {
  overflow-x: auto;
  overflow-y: hidden;
}

.chart-wrap {
  margin-bottom: 2.5rem !important;
}

#chart-ocupacao {
  height: 320px; /* antes 260px */
}

/* Nav dos check-ins: botões pequenos e visíveis */
#checkins-dow-nav {
  gap: .2rem !important;
  margin: .1rem 0 .1rem !important;
  font-size: 11px !important;
}
#checkins-dow-nav button {
  color: #333 !important;              /* <-- força texto visível */
  background: transparent !important;
  border: 0 !important;
  padding: 0 4px !important;
  line-height: 1 !important;
  font-size: 11px !important;
  cursor: pointer !important;
  border-radius: 4px;
}
#checkins-dow-nav button:hover {
  background: rgba(0,0,0,.06) !important;
}
#checkins-dow-nav button:disabled {
  color: #999 !important;
  cursor: default !important;
  background: transparent !important;
  opacity: .7;
}
#checkins-dow-nav #lbl-checkins-ano {
  color: #222 !important;              /* <-- força cor do ano */
  font-weight: 600;
  font-size: 12px !important;
  min-width: 3ch;
  text-align: center;
}

/* Corrige visibilidade e espaçamento dos labels dos dias */
#chart-checkins-dow {
  height: 300px; /* dá espaço vertical */
}

canvas#chart-checkins-dow + div,  /* legenda do Chart.js */
#chart-checkins-dow ~ .chartjs-size-monitor {
  color: #222 !important;
  font-size: 12px !important;
}

.chartjs-axis-x text, 
.chartjs-axis-y text {
  fill: #222 !important;
}

/* opcional: espaço extra abaixo para não cortar texto */
.chart-wrap, 
.chart-wrap-480 {
  padding-bottom: 8px;
}

/* Cartões para gráficos e tabelas */
.viz-card{
  background:#fff;
  border:1px solid #e6e6e6;
  border-radius:12px;
  box-shadow:0 2px 8px rgba(0,0,0,.06);
  padding:12px 14px;
  margin:14px 0;
}

/* Ajustes internos */
.viz-card canvas{ display:block; width:100% !important; }
.viz-card table{ box-shadow:none; border-radius:8px; overflow:hidden; }

/* Só nesta página */
body[data-page="analise123vs1248"] .viz-card,
body[data-page="analise123vs1248"] .chart-and-table,
body[data-page="analise123vs1248"] .chart-wrap {
  overflow-x: hidden !important;
  max-width: 100% !important;
}

#chart-fat-mensal {
  width: 100% !important;
  min-width: 0 !important;   /* cancela qualquer largura forçada */
  display: block;
}

.viz-card h4 {
  margin: 0 0 12px 2px;
  font-size: 22px;
  font-weight: 600;
  color: #000;
  text-align: center;   /* 👈 novo */
}

.subcard + .subcard {
  margin-top: 24px; /* espaço extra entre uma subcard e a seguinte */
}

.app-footer {
  background: var(--color-primary);
  color: #fff;
  text-align: center;
  font-weight: 600;
  font-size: 15px;
  padding: 14px 0;
  margin-top: 40px;
  border-radius: 0;     /* remove cantos arredondados */
  box-shadow: none;     /* remove sombra */
  position: static;     /* garante que não fica fixo */
}

/* IVA Estrangeiro */
#iva-estrangeiro-tri td, #iva-estrangeiro-tri th { text-align: center; }
#iva-more-btn { margin-top: .25rem; }

#iva-estrangeiro-form input{
  height: 36px;
  padding: 6px 10px;
  box-sizing: border-box;
}

/* Res. Total (€/%) – mesmo fundo do cabeçalho principal */
.table-dca th.res-total-block {
  white-space: pre-line;        /* permite quebra de linha */
  text-align: center;           /* centra horizontalmente */
  vertical-align: middle;       /* centra verticalmente */
  background: var(--color-primary) !important; /* mesma cor do header principal */
  color: #fff !important;       /* texto branco */
  font-weight: 700;
}

/* Coluna de AÇÕES com botões respiráveis */
#relatorio-faturacao td.acoes {
  padding-right: 12px;               /* afasta da borda direita */
  vertical-align: middle;            /* alinha com a linha */
}

#relatorio-faturacao td.acoes .btn-col {
  display: flex;
  flex-direction: column;            /* empilha verticalmente */
  align-items: flex-end;             /* encosta à direita mas com espaço */
  gap: 8px;                          /* espaço entre os botões */
}

/* Botões mais confortáveis ao toque */
#relatorio-faturacao td.acoes .btn-col button {
  padding: 6px 12px;
  border-radius: 8px;
}

/* Em ecrãs pequenos, põe os botões lado a lado com espaço */
@media (max-width: 680px) {
  #relatorio-faturacao td.acoes .btn-col {
    flex-direction: row;
    justify-content: flex-end;
    flex-wrap: wrap;
    gap: 8px;
  }
}

/* DCA – Parâmetros compacto e encostado à esquerda */
body[data-page="dca"] .params-card {
  max-width: 560px;     /* reduz o cartão */
  margin: 0;            /* encosta à esquerda */
  padding: 10px 12px;
}
body[data-page="dca"] .params-table {
  font-size: 0.92rem;   /* ligeiramente menor */
}
body[data-page="dca"] .params-table input[type="month"],
body[data-page="dca"] .params-table input[type="number"] {
  height: 34px;
  line-height: 34px;
}

/* DCA – Tabela Juro com o mesmo look dos cartões */
body[data-page="dca"] .juro-card { max-width: 680px; margin: 10px 0 0 0; }
#juro-table th, #juro-table td { text-align: center; }
#juro-table input.cell {
  width: 12ch;
  text-align: center;
  height: 32px; line-height: 32px;
  display: inline-block;
}

/* Input com sufixo € */
.money-wrap { position: relative; display: inline-block; }
.money-wrap input { padding-right: 18px; }
.money-wrap::after {
  content: "€";
  position: absolute;
  right: 6px;
  top: 50%;
  transform: translateY(-50%);
  font-size: 0.95em;
  color: #666;
  pointer-events: none;
}

/* Destaque do mês atual na DCA */
.table-dca tbody tr.current-month {
  font-weight: 700;
  background: #eef4ff !important;        /* azul muito claro */
}

.badge {
  display: inline-block;
  padding: 2px 8px;
  border-radius: 999px;
  font-size: 0.8rem;
  line-height: 1.2;
  font-weight: 600;
  text-transform: capitalize;
}
.badge-stake { background: #fff6e6; color: #9a5a12; } /* warm orange */
.badge-earn  { background: #f0ffe5; color: #5a7a1a; } /* green */
.badge-spot  { background: #e6f1ff; color: #24466F; } /* blue */

.subtotal-row {
  background: #fafafa;
  font-weight: 700;
  border-top: 2px solid #e5e7eb;
}
.val-pos { color: #166534; } /* verde */
.val-neg { color: #991b1b; } /* vermelho */

/* NEW CRYPTO */
.loading, .error-message {
  padding: 1rem;
  text-align: center;
  margin: 1rem 0;
  border-radius: 8px;
}

.loading {
  background: #f0f9ff;
  border: 1px solid #bae6fd;
}

.error-message {
  background: #fef2f2;
  border: 1px solid #fecaca;
  color: #dc2626;
}

.val-pos { color: #166534; }
.val-neg { color: #991b1b; }

.btn-toggle.active { background:#166534; color:#fff; border-color:#111827; }


/* KPIs: 4 cartões na mesma linha e alinhados no topo */
.kpis-grid{
  display:grid;
  grid-template-columns:repeat(4, minmax(0,1fr));
  gap:10px;
  align-items:start;
}
.kpi-card{ padding:12px; }
.kpi-label{ font-size:.85rem; color:#6b7280; }
.kpi-value{ font-size:1.15rem; font-weight:700; line-height:1.2; }
.kpi-stamp{ font-size:1rem; font-weight:500; }
.kpi-sub{ margin-top:4px; font-size:.85rem; line-height:1; }
.kpi-sub.pos{ color:#16a34a; } /* verde */
.kpi-sub.neg{ color:#dc2626; } /* vermelho */

@media (max-width: 800px){
  .kpis-grid{ grid-template-columns:1fr 1fr; }
}

.table-stamp {
  margin-top: 10px;
  font-size: 0.85rem;
  color: #6b7280;
  text-align: left;
  padding-left: 4px;
}
